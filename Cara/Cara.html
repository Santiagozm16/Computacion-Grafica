 <!DOCTYPE html>
<html>
  <head>
    <title>Ej: Cara</title>
    <style>
      html, body { margin: 0; padding: 0; overflow: hidden; }
    </style>
  </head>
  <body>
    <script src="js/three.js"></script>
	<script src="js/controls/OrbitControls.js"></script>
    <script>
		var scene, aspect, camera, renderer, controls;
		var startTime = Date.now();
		var Chin;
		var face;
		var eye;
		var lips;
		var eyebrows;
		
		class TRIANGLE_FAN{
		  constructor( Geometria,Material ){
		    this.geometria = Geometria;
			console.log(this.geometria);
			this.Material = Material; 
		  }  
		  draw(){			
			for( var i=2; i<this.geometria.vertices.length; i++ ){
			  this.geometria.faces.push( new THREE.Face3(0,i-1,i) );
			}
			this.geometria.computeFaceNormals();
			var fan1 = new THREE.Mesh( this.geometria, this.Material );
			//scene.add( fan );
			return fan1;
		  }
		}
		
		class TRIANGLE_STRIP{	
		  constructor( Geometria,Material ){
		    this.geometria = Geometria;
			console.log(this.geometria);
			this.Material = Material;
		  }  
		  draw(){			
			for( var i=2; i<this.geometria.vertices.length; i++ ){
			  this.geometria.faces.push( new THREE.Face3(i,i-1,i-2) );
			}
			this.geometria.computeFaceNormals();
			var strip1 = new THREE.Mesh( this.geometria, this.Material );
			return strip1;
		  }
		}
		
		init();
		animate();
	
		function init(){
			scene = new THREE.Scene();
			aspect = window.innerWidth / window.innerHeight;
			camera = new THREE.PerspectiveCamera( 45, aspect, 0.1, 1000);
			renderer = new THREE.WebGLRenderer({antialias: true});
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );
			controls = new THREE.OrbitControls( camera, renderer.domElement );
            				  
			var size = 10;
			var arrowSize = 1;
			var origin = new THREE.Vector3( 0, 0, 0 );
			var x = new THREE.Vector3( 1, 0, 0 );
			var y = new THREE.Vector3( 0, 1, 0 );
		  	var z = new THREE.Vector3( 0, 0, 1 );
			var color1 = new THREE.Color( 0xFFFFFF );
		  	var color2 = new THREE.Color( 0x333333 );
		  	var colorR = new THREE.Color( 0xAA3333 );
		  	var colorG = new THREE.Color( 0x33AA33 );
		  	var colorB = new THREE.Color( 0x333366 );
            
            //CREAR LAS FLECHAS QUE INDICAN LOS EJES DE COORDENADAS 3D
            var arrowX = new THREE.ArrowHelper( x, origin, arrowSize, colorR );
            var arrowY = new THREE.ArrowHelper( y, origin, arrowSize, colorG );
            var arrowZ = new THREE.ArrowHelper( z, origin, arrowSize, colorB );
			
			//CREAR ILUMINACIÓN
            var ambient = new THREE.AmbientLight( 0xffffff, 2 );
            scene.add( ambient );
            
            var pointLight = new THREE.PointLight( 0xffffff, 1, 100 );
            pointLight.position.set( 5, 5, -5 );
            scene.add( pointLight );
			
			//CREAR LOS MATERIALES
			
            var matCara = new THREE.LineBasicMaterial( { color: 0xcba894, side:THREE.DoubleSide } ); 
			var matLinea = new THREE.LineBasicMaterial( { color: colorG, side:THREE.DoubleSide } );
			var matBarbilla = new THREE.LineBasicMaterial ({color : 0xb9876e , side:THREE.DoubleSide});
			var matOjos = new THREE.LineBasicMaterial ({color: 0x000031, side:THREE.DoubleSide });
			var matLabios = new THREE.LineBasicMaterial ({color: 0x9f6969, side:THREE.DoubleSide }); 
			var matCejas = new THREE.LineBasicMaterial ({color: 0x884920, side:THREE.DoubleSide });
			
			//CREAR LAS GEOMETRÍAS
			
            var GeoCara = new THREE.Geometry();//GEOMETRIA CARA
			for(var i =0;i <=2; i=i+2){
				for(var j = 0; j<=2; j=j+2){
				var puntoCara = new THREE.Vector3(i,j);
				GeoCara.vertices.push( puntoCara );
				}
			}
			
			var GeoBarbilla = new THREE.Geometry(); //GEOMETRIA BARBILLA
			var pInicial = new THREE.Vector3(1,-0.2,0);
			GeoBarbilla.vertices.push(pInicial);
			for(var i = 0; i<=2;i++){
				var puntoB = new THREE.Vector3(i,0,0);
				GeoBarbilla.vertices.push(puntoB);
			}
			
			var GeoOjos = new THREE.Geometry(); //GEOMETRIA OJOS
			var poInicial = new THREE.Vector3(0.5,1.2,0);
			GeoOjos.vertices.push(poInicial);
			for(var i = 0; i<=360; i=i+30){
				var ojito = new THREE.Vector3();
				ojito.x = 0.15*Math.cos(i*Math.PI/180)+0.5;
				ojito.y = 0.15*Math.sin(i*Math.PI/180)+1.2;
				GeoOjos.vertices.push(ojito);
			}
			
			var GeoBoca = new THREE.Geometry(); //GEOMETRIA BOCA
			var pInicialB1 = new THREE.Vector3(0.25,0.25,0);
			var pInicialB2= new THREE.Vector3(0.28,0.20,0);
			GeoBoca.vertices.push(pInicialB1);
			GeoBoca.vertices.push(pInicialB2);
			for (var i = 0.5;i<=1.5;i=i+0.25){
				if(i<=1.25){
				var punto1 = new THREE.Vector3(i,0.25,0);
				var punto2 = new THREE.Vector3(i+0.03,0.20,0);
				GeoBoca.vertices.push(punto1);
				GeoBoca.vertices.push(punto2);
				}else{
				var punto1 = new THREE.Vector3(i,0.25,0);
				var punto2 = new THREE.Vector3(i-0.03,0.20,0);
				GeoBoca.vertices.push(punto1);
				GeoBoca.vertices.push(punto2);
				}
			}
			
			var GeoCejas = new THREE.Geometry(); //GEOMETRIA CEJAS
			var pInicialC1 = new THREE.Vector3(0.2,0.20,0);
			var pInicialC2= new THREE.Vector3(0.23,0.25,0);
			GeoCejas.vertices.push(pInicialC2);
			GeoCejas.vertices.push(pInicialC1);
			for (var i = 0.5;i<=0.8;i=i+0.2){
				if(i<=0.6){
				var punto3 = new THREE.Vector3(i,0.20,0);
				var punto4 = new THREE.Vector3(i+0.03,0.25,0);
				GeoCejas.vertices.push(punto4);
				GeoCejas.vertices.push(punto3);
				}else{
				var punto3 = new THREE.Vector3(i,0.20,0);
				var punto4 = new THREE.Vector3(i-0.03,0.25,0);
				GeoCejas.vertices.push(punto4);
				GeoCejas.vertices.push(punto3);
				}
			}
			
			//CARGAR GEOMETRIAS AL FAN O STRIP
			Chin = new TRIANGLE_FAN(GeoBarbilla,matBarbilla);	
			var menton = Chin.draw();
			var lineas = new THREE.Line( GeoCara, matBarbilla );
			face = new TRIANGLE_STRIP(GeoCara,matCara);
			var cara = face.draw();
			var lineas2 = new THREE.Line( GeoBarbilla, matCara );
			eye = new TRIANGLE_FAN(GeoOjos,matOjos);
			var ojoi = eye.draw();
			var ojod = eye.draw();
			ojod.position.x=1;
			var lineas3 = new THREE.Line (GeoOjos, matOjos);
			var lineas4 = new THREE.Line (GeoOjos, matOjos);
			lips = new TRIANGLE_STRIP(GeoBoca,matLabios);
			var labios = lips.draw();
			var lineas5 = new THREE.Line (GeoBoca, matLabios);
			eyebrows = new TRIANGLE_STRIP(GeoCejas,matCejas);
			var cejaizq = eyebrows.draw();
			var cejader = eyebrows.draw();
			var lineas6 = new THREE.Line (GeoCejas, matCejas);
			var lineas7= new THREE.Line (GeoCejas, matCejas);
			
			//ASIGNAR POSICIONES
			labios.position.x=0.1;
			labios.position.y=0.1;
			cejaizq.position.x=0.04;
			cejaizq.position.y=1.2;
			cejader.position.x=1.04;
			cejader.position.y=1.2;
			ojod.position.x=1;
			ojod.position.z=0.01;
			ojoi.position.z=0.01;
			labios.position.z=0.01;
			cejaizq.position.z=0.01;
			cejader.position.z=0.01;
			
			//PADRE E HIJO.
			
			/*cara.add(lineas2);
			menton.add(lineas);
			ojoi.add(lineas3);
			ojod.add(lineas4);
			labios.add(lineas5);
			cejaizq.add(lineas6);
			cejader.add(lineas7);*/
			
			cara.add(menton);
			cara.add(ojod);
			cara.add(ojoi);
			cara.add(labios);
			cara.add(cejader);
			cara.add(cejaizq);
		  	//AGREGAR A LA ESCENA
			
		  	scene.add( arrowZ );
			scene.add(cara);
			
			camera.position.x = 0;
			camera.position.y = 0;	 
		  	camera.position.z = 8;
		  	camera.lookAt( origin );
			}
    
    function animate() {
        render();
		controls.update(); // required if controls.enableDamping = true, or if controls.autoRotate = true
        requestAnimationFrame( animate );
    }
    
    function render(){
        renderer.render( scene, camera );
    }
    </script>
  </body>
</html>
